/* DO NOT EDIT: File is autogenerated */
package <%= object_type.schema.java.package %>;

import javax.annotation.Generated;
import javax.persistence.*;
import javax.validation.constraints.*;

@Generated( "Domgen" )
@SuppressWarnings( { "UnusedDeclaration" } )<% if !object_type.abstract? %>
<% if not object_type.jpa.queries.empty? %>@NamedQueries( value = {
<%= object_type.jpa.queries.collect { |q| "  @NamedQuery( name = \"#{q.fully_qualified_name}\", query = \"#{q.query_string}\" )" }.join(",\n") %>
} )<% end %>
@Entity
@Table( name = "<%= object_type.sql.table_name %>",
        uniqueConstraints = {<%=
  object_type.attributes.select{|a|a.unique?}.collect{|a|
  "@UniqueConstraint( columnNames = {\"#{q(a.sql.column_name)}\"})"
  }.join(",\n        ")
%>})<% end %>
public <%= object_type.final? ? 'final ' : object_type.abstract? ? 'abstract ' : '' %>class <%= object_type.java.classname %>
<% if object_type.extends %>    extends <%= object_type.schema.object_type_by_name(object_type.extends).java.classname %><% end %>
{
<% object_type.declared_attributes.each do |a|
  if !a.persistent?
%>  @Transient
<%
  else
    if a.primary_key?
%>  @Id
<%    if a.sql.identity?
%>  @GeneratedValue( strategy = GenerationType.IDENTITY )
<%
      end
    end
    if a.reference?
%>  @ManyToOne
  @JoinColumn( name = "<%= q(a.sql.column_name) %>", nullable = <%= a.nullable? %>, updatable = <%= !a.immutable? %> )<%
    else
%>  @Column( name = "<%= q(a.sql.column_name) %>"<%= a.length.nil? ? '' :", length = #{a.length}"%>, nullable = <%= a.nullable? %>, updatable = <%= !a.immutable? %> )<%
    end
   end
%>
<% if !a.nullable? && !a.sql.identity? %>  @NotNull
<% end %><% if !a.length.nil? %>  @Size(max = <%= a.length %>)
<% end %>  private <%= a.java.java_type %> <%= a.java.field_name %>;

<% end
   object_type.referencing_attributes.each do |attribute|
     if attribute.inverse_relationship_type == :has_many
%>  @OneToMany
  private java.util.Set<<%= attribute.object_type.java.fully_qualified_name %>> <%= pluralize(attribute.inverse_relationship_name) %>;

<% elsif attribute.inverse_relationship_type == :has_one
%>  @OneToOne(optional = <%= !attribute.nullable? %>, mappedBy= "<%= attribute.java.field_name %>")
  private <%= attribute.object_type.java.fully_qualified_name %> <%= attribute.inverse_relationship_name %>;

<%
    end
  end
%>
<%= object_type.declared_attributes.collect {|a| java_accessors(a.java.field_name,a.java.java_type) }.join("\n") %>
<%= object_type.referencing_attributes.collect do |a|
  if a.inverse_relationship_type == :has_many
    java_accessors(pluralize(a.inverse_relationship_name),"java.util.Set<#{a.object_type.java.fully_qualified_name}>")
   elsif a.inverse_relationship_type == :has_one
    java_accessors(a.inverse_relationship_name,a.object_type.java.fully_qualified_name)
   else
    ''
   end
end.join("\n")
%>
  @Override
  public boolean equals( final Object o )
  {
    if ( this == o )
    {
      return true;
    }
    else if ( o == null || getClass() != o.getClass() )
    {
      return false;
    }
    else
    {
      final <%= object_type.java.classname %> that = (<%= object_type.java.classname %>) o;
      return getID() != null && getID().equals( that.getID() );
    }
  }

  public String toDebugString()
  {
    return "<%= object_type.name %>[" +
<% object_type.java.debug_attributes.each do |a|
    attr = object_type.attribute_by_name(a)
%>           "<%= attr.name %> =" + get<%= attr.name %>() + 
<% end %>           "]";
  }

  public String toLabel()
  {
<% if !object_type.java.label_attribute.nil?
%>    return String.valueOf( <%= object_type.attribute_by_name(object_type.java.label_attribute).java.field_name %> );<%
else
      pk = object_type.primary_key
%>    return "<%= object_type.name %>[<%= pk.name %> = " + <%= pk.name %> +"]";<% end %>
  }

  @Override
  public String toString()
  {
<% if !object_type.java.label_attribute.nil?
%>    return toLabel();<% 
else
%>    return toDebugString();<% end %>
  }
}