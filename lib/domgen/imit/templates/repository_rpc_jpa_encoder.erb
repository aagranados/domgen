/* DO NOT EDIT: File is auto-generated */
package <%= repository.imit.encoder_package %>;

import org.realityforge.imit.transport.rpc.Change;
import org.realityforge.imit.transport.rpc.ChangeSet;

/**
 * * Utility class that encodes RPC payloads from JPA entities for the repository "<%= repository.name %>".
 */
@javax.annotation.Generated( "Domgen" )
@SuppressWarnings( { "UnusedDeclaration", "JavaDoc" } )
public class <%= repository.imit.rpc_jpa_encoder_name %>
{
  @javax.persistence.PostUpdate
  @javax.persistence.PostPersist
  public void postUpdate( final Object object )
  {
    <% repository.imit.concrete_client_side_entities.each do |entity|
%>if( <%= entity.jpa.qualified_entity_name %>.class.isInstance( object ) )
    {
      final Change change = <%= entity.data_module.imit.qualified_rpc_jpa_encoder_name %>.encode<%= entity.name %>( <%= entity.jpa.qualified_entity_name %>.class.cast( object ) );
      addChange( change );
    }
    else <%
   end
%>
    {
      //Ignore
    }
  }

  @javax.persistence.PostRemove
  public void postRemove( final Object object )
  {
<% repository.imit.concrete_client_side_entities.each do |entity|
%>if( <%= entity.jpa.qualified_entity_name %>.class.isInstance( object ) )
    {
      final Change change = <%= entity.data_module.imit.qualified_rpc_jpa_encoder_name %>.encode<%= entity.name %>Remove( <%= entity.jpa.qualified_entity_name %>.class.cast( object ) );
      addChange( change );
    }
    else <%
 end
%>
    {
      //Ignore
    }
  }

  private void addChange( final Change change )
  {
    //Insert magic here
  }
}
