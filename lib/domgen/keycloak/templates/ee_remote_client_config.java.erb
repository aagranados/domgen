/* DO NOT EDIT: File is auto-generated */
package <%= to_package(remote_client.qualified_ee_remote_client_config_name) %>;

@javax.annotation.Generated( "Domgen" )
@javax.enterprise.context.ApplicationScoped
public class <%= remote_client.ee_remote_client_config_name %>
{
  @javax.annotation.Nonnull
  public static final String KEYCLOAK_NAME = "<%= remote_client.name %>.Keycloak";
  @javax.annotation.Nonnull
  public static final String KEYCLOAK_CONFIG_NAME = "<%= remote_client.name %>.KeycloakConfig";
  @javax.annotation.Resource( lookup = <%= remote_client.keycloak_repository.repository.ee.qualified_jndi_resource_constants_name %>.<%= remote_client.keycloak_repository.repository.ee.custom_jndi_resources["#{remote_client.jndi_config_base}/server_url"] %> )
  private String _keycloakServerURL;
  @javax.annotation.Resource( lookup = <%= remote_client.keycloak_repository.repository.ee.qualified_jndi_resource_constants_name %>.<%= remote_client.keycloak_repository.repository.ee.custom_jndi_resources["#{remote_client.jndi_config_base}/realm"] %> )
  private String _keycloakRealm;
  @javax.annotation.Resource( lookup = <%= remote_client.keycloak_repository.repository.ee.qualified_jndi_resource_constants_name %>.<%= remote_client.keycloak_repository.repository.ee.custom_jndi_resources["#{remote_client.jndi_config_base}/client"] %> )
  private String _keycloakClient;
  @javax.annotation.Resource( lookup = <%= remote_client.keycloak_repository.repository.ee.qualified_jndi_resource_constants_name %>.<%= remote_client.keycloak_repository.repository.ee.custom_jndi_resources["#{remote_client.jndi_config_base}/username"] %> )
  private String _keycloakUsername;
  @javax.annotation.Resource( lookup = <%= remote_client.keycloak_repository.repository.ee.qualified_jndi_resource_constants_name %>.<%= remote_client.keycloak_repository.repository.ee.custom_jndi_resources["#{remote_client.jndi_config_base}/password"] %> )
  private String _keycloakPassword;
  @javax.annotation.Resource( lookup = <%= remote_client.keycloak_repository.repository.ee.qualified_jndi_resource_constants_name %>.<%= remote_client.keycloak_repository.repository.ee.custom_jndi_resources["#{remote_client.jndi_config_base}/secret"] %> )
  private String _keycloakSecret;
  private org.realityforge.keycloak.client.authfilter.KeycloakConfig _keycloakConfig;
  private org.realityforge.keycloak.client.authfilter.Keycloak _keycloak;

  @javax.annotation.PostConstruct
  protected void postConstruct()
  {
    _keycloakConfig = org.realityforge.keycloak.client.authfilter.KeycloakConfig.createPasswordConfig( _keycloakServerURL, _keycloakRealm, _keycloakClient, _keycloakUsername, _keycloakPassword, "-".equals( _keycloakSecret ) ? null : _keycloakSecret );
    _keycloak = new org.realityforge.keycloak.client.authfilter.Keycloak( _keycloakConfig );
  }

  @javax.enterprise.inject.Produces
  @javax.inject.Named( KEYCLOAK_NAME )
  @javax.annotation.Nonnull
  public org.realityforge.keycloak.client.authfilter.Keycloak getKeycloak()
  {
    return _keycloak;
  }

  @javax.enterprise.inject.Produces
  @javax.inject.Named( KEYCLOAK_CONFIG_NAME )
  @javax.annotation.Nonnull
  public org.realityforge.keycloak.client.authfilter.KeycloakConfig getKeycloakConfig()
  {
    return _keycloakConfig;
  }
}
