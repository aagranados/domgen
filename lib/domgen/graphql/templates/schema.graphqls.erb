# DO NOT EDIT: File is auto-generated

schema {
  query: Query
  mutation: Mutation
  subscription: Subscription
}

type Query {
}

type Mutation {
}

type Subscription {
}

<% repository.graphql.non_standard_scalars.sort.each do |scalar| -%>
scalar <%= scalar %>
<% end -%>
<% repository.data_modules.select(&:graphql?).each do |data_module| -%>
<% data_module.enumerations.select(&:graphql?).each do |enumeration| -%>

<%= description_as_string(enumeration, 0) -%>
enum <%= enumeration.graphql.name %> {
<% enumeration.values.select{|value| value.graphql?}.each do |value| -%>
<%= description_as_string(value, 2) -%>
  <%= value.graphql.name %><%= deprecate_directive(value) %>
<% end -%>
}
<% end -%>
<% end -%>
<% repository.data_modules.select{|data_module| data_module.graphql?}.each do |data_module| -%>
<% data_module.entities.select{|entity| entity.graphql? }.each do |entity| -%>

<%= description_as_string(entity, 0) -%>
<% if entity.abstract? -%>
interface <%= entity.graphql.name %> {
<% else -%>
<% implements = entity.supertypes.select{|type| type.graphql? && type.abstract? } -%>
type <%= entity.graphql.name %><%= implements.empty? ? '' : " implements #{implements.collect{|type|type.graphql.name}.join(' & ')}" %> {
<% end -%>
<% entity.attributes.select{|attribute| attribute.graphql?}.each do |attribute| -%>
<%= description_as_string(attribute, 2) -%>
<%
  attribute_type =
    if attribute.reference?
      attribute.referenced_entity.graphql.name
    elsif attribute.enumeration?
      attribute.enumeration.graphql.name
    else
      attribute.graphql.scalar_type
    end
-%>
  <%= attribute.graphql.name %>: <%= attribute_type %><%= attribute.nullable? ? '' : "!" -%><%= deprecate_directive(attribute) %>
<% end -%>
<% entity.referencing_attributes.
  select { |attribute| !(attribute.abstract? || attribute.inherited?) && attribute.inverse.graphql? && attribute.inverse.graphql.traversable? }.each do |attribute|

  attribute_type = attribute.inverse.multiplicity == :many ? "[#{attribute.entity.graphql.name}!]" : attribute.entity.graphql.name
-%>
<%= description_as_string(attribute.inverse, 2) -%>
  <%= attribute.inverse.graphql.name %>: <%= attribute_type %><%= attribute.inverse.multiplicity == :zero_or_one ? '' : "!" -%><%= deprecate_directive(attribute) %>
<% end -%>
}
<% end -%>
<% end -%>
