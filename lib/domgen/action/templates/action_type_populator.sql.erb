/* DO NOT EDIT: File is auto-generated */

INSERT INTO Action.tblActionClassification(Code)
  SELECT 'RPC'
  WHERE 0 = (SELECT COUNT(*) FROM Action.tblActionClassification WHERE [Code] = 'RPC')

<%
  repository.data_modules.each do |data_module|
    data_module.services.select {|s| s.action?}.each do |service|
      service.methods.select {|m| m.ejb?}.each do |method|
        userKey = "#{data_module.name}.#{service.name}.#{method.name}"
        code = hashCode(method)
-%>
  -- Method: <%= userKey %>
  insert into [Action].tblActionType(
    ClassificationId, ParentId, UserKey, Code, ExternalId, RequestSchema, ResponseSchema,
    PreCompletionUserFeedbackPattern, PostCompletionUserFeedbackPattern, OnErrorUserFeedbackPattern, MaxErrorCount, RetryRate,
    StoreResponseOnSuccess, GenerateMessageOnSuccess, RetainFailedMessageDuration, StoreErrorMessageOnFailure, PersistOnSuccess,
    PersistDuration, ClearErrorOnSuccess, Inactive)
  select
    C.Id, NULL, '<%= userKey %>', '<%= code%>', 0, '<%= requestSchema(method) %>', '<%= responseSchema(method) %>',
    '', '', '', 1, 0,
    1, 1, 1, 1, 1,
    null, 1, 0
  from Action.tblActionClassification C
  where C.Code = 'RPC'
    and 0 = (SELECT COUNT(*) FROM [Action].tblActionType WHERE [Code] = '<%= code %>')

<%
      end
    end
  end
-%>
