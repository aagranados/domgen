/* DO NOT EDIT: File is auto-generated */
package <%= to_package(repository.gwt.qualified_callback_failure_answer_name) %>;

@java.lang.SuppressWarnings( { "UnusedDeclaration", "JavaDoc" } )
final class <%= repository.gwt.callback_failure_answer_name %><T>
  implements org.mockito.stubbing.Answer<Void>
{
  @javax.annotation.Nonnull
  private final java.util.function.Consumer<java.lang.Runnable> _invoker;
  @javax.annotation.Nonnull
  private final Throwable _throwable;

  <%= repository.gwt.callback_failure_answer_name %>( @javax.annotation.Nonnull final Throwable throwable )
  {
    this( java.lang.Runnable::run, throwable );
  }

  <%= repository.gwt.callback_failure_answer_name %>( @javax.annotation.Nonnull final java.util.function.Consumer<java.lang.Runnable> invoker, @javax.annotation.Nonnull final Throwable throwable )
  {
    _invoker = java.util.Objects.requireNonNull( invoker );
    _throwable = java.util.Objects.requireNonNull( throwable );
  }

  @Override
  public Void answer( @javax.annotation.Nonnull final org.mockito.invocation.InvocationOnMock invocation )
  {
    for ( final Object argument : invocation.getArguments() )
    {
      if ( argument instanceof <%= repository.gwt_rpc.qualified_async_callback_adapter_name %> )
      {
        _invoker.accept( () -> {
          final <%= repository.gwt.qualified_async_error_callback_name %> callback = ( (<%= repository.gwt_rpc.qualified_async_callback_adapter_name %>) argument ).getErrorCallback();
          if( null != callback )
          {
            callback.onFailure( _throwable );
          }
        } );
      }
      else if ( argument instanceof <%= repository.gwt.qualified_async_error_callback_name %> )
      {
        _invoker.accept( () -> ( (<%= repository.gwt.qualified_async_error_callback_name %>) argument ).onFailure( _throwable ) );
      }
    }
    return null;
  }
}
