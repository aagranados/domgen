/* DO NOT EDIT: File is auto-generated */
package <%= to_package(repository.gwt.qualified_abstract_client_ux_test_name) %>;

@java.lang.SuppressWarnings( { "UnusedDeclaration" } )
@javax.annotation.Generated( "Domgen" )
public abstract class <%= repository.gwt.abstract_client_ux_test_name %>
  extends <%= repository.gwt.qualified_client_test_name %>
{
  @org.testng.annotations.BeforeMethod
  public void preTest()
    throws Exception
  {
    super.preTest();
<% if repository.imit? -%>
    replicant.Replicant.context().registerConnector( getInjector().getSystemSchema(), new TestTransport() );
    pumpAllAsyncActions();
<% end -%>
  }

<% repository.gwt.ux_test_class_contents.each do |content| %>
<%= content -%>
<% end -%>
<% if repository.imit? -%>

  public class TestTransport
    extends replicant.AbstractTransport
  {
    @java.lang.Override
    protected void doConnect()
    {
      queueAsyncActions( () -> onMessageReceived( replicant.messages.SessionCreatedMessage.create( org.realityforge.guiceyloops.shared.ValueUtil.randomString() ) ));
    }

    @java.lang.Override
    protected void sendRemoteMessage( @javax.annotation.Nonnull final Object message )
    {
    }

    @java.lang.Override
    protected void doDisconnect()
    {
      queueAsyncActions( () -> onDisconnect() );
    }
  }
<% end -%>
}
